{% extends 'canteen_app/base.html' %} {% block title %}Track Order | Canteen
{%endblock %} {% block content %}
<div class="min-h-screen bg-gray-100 p-8">
  <div class="max-w-3xl mx-auto bg-white rounded-xl shadow-lg p-8">
    <h2 class="text-3xl font-bold text-gray-800 mb-6">Track Your Order</h2>
    <div class="flex justify-between items-center border-b pb-4 mb-6">
      <h3 class="text-xl font-semibold text-gray-700">
        Order ID: <span class="text-indigo-600">{{ order.order_number }}</span>
      </h3>
      <span class="text-lg font-medium text-gray-500"
        >Placed: {{ order.created_at|date:"F d, Y h:i A" }}</span
      >
    </div>

    <div class="relative mb-8">
      <div class="flex justify-between items-center mb-4">
        <div class="flex-1 text-center">
          <span
            class="inline-block p-4 rounded-full {% if order.status == 'pending' %}bg-indigo-600 text-white{% else %}bg-gray-200 text-gray-500{% endif %}"
          >
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
              <path
                d="M10 2a8 8 0 100 16A8 8 0 0010 2zm0 14a6 6 0 110-12 6 6 0 010 12zM9 9H7v2h2v-2zm0 3H7v2h2v-2zm0-6H7v2h2V6zM13 9h-2v2h2v-2zm0 3h-2v2h2v-2zm0-6h-2v2h2V6z"
              ></path>
            </svg>
          </span>
          <p
            class="mt-2 text-sm {% if order.status == 'pending' %}font-bold text-indigo-600{% else %}text-gray-500{% endif %}"
          >
            Pending
          </p>
        </div>
        <div class="flex-1 text-center">
          <span
            class="inline-block p-4 rounded-full {% if order.status == 'preparing' %}bg-indigo-600 text-white{% else %}bg-gray-200 text-gray-500{% endif %}"
          >
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
              <path
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v4a1 1 0 001 1h2a1 1 0 100-2h-1V7z"
              ></path>
            </svg>
          </span>
          <p
            class="mt-2 text-sm {% if order.status == 'preparing' %}font-bold text-indigo-600{% else %}text-gray-500{% endif %}"
          >
            Preparing
          </p>
        </div>
        <div class="flex-1 text-center">
          <span
            class="inline-block p-4 rounded-full {% if order.status == 'ready' %}bg-indigo-600 text-white{% else %}bg-gray-200 text-gray-500{% endif %}"
          >
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
              <path
                d="M9 12a3 3 0 100-6 3 3 0 000 6zm-2 5a7 7 0 1114 0H7zm2-2a5 5 0 00-10 0H0a9 9 0 0118 0h-2a7 7 0 00-14 0z"
              ></path>
            </svg>
          </span>
          <p
            class="mt-2 text-sm {% if order.status == 'ready' %}font-bold text-indigo-600{% else %}text-gray-500{% endif %}"
          >
            Ready for Pickup
          </p>
        </div>
        <div class="flex-1 text-center">
          <span
            class="inline-block p-4 rounded-full {% if order.status == 'completed' %}bg-green-600 text-white{% else %}bg-gray-200 text-gray-500{% endif %}"
          >
            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
              <path
                fill-rule="evenodd"
                d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </span>
          <p
            class="mt-2 text-sm {% if order.status == 'completed' %}font-bold text-green-600{% else %}text-gray-500{% endif %}"
          >
            Completed
          </p>
        </div>
      </div>
      <div class="absolute inset-x-0 top-1/4 h-1 bg-gray-200 -z-10">
        <div
          class="h-1 bg-indigo-600 transition-all duration-500 ease-in-out"
          style="width: {% if order.status == 'pending' %}0{% elif order.status == 'preparing' %}33.33%{% elif order.status == 'ready' %}66.66%{% elif order.status == 'completed' %}100%{% endif %};"
        ></div>
      </div>
    </div>

    <div class="mt-10 p-6 bg-gray-50 rounded-lg">
      <h4 class="text-xl font-bold mb-4">Order Details</h4>
      <ul class="divide-y divide-gray-200">
        {% for item in order.items.all %}
        <li class="flex justify-between py-2">
          <span class="text-gray-700"
            >{{ item.menu_item.name }} x {{ item.quantity }}</span
          >
          <span class="font-medium text-gray-900"
            >₹{{ item.unit_price|floatformat:2 }}</span
          >
        </li>
        {% endfor %}
      </ul>
      <div
        class="flex justify-between items-center pt-4 border-t-2 border-gray-200 mt-4"
      >
        <span class="text-lg font-bold text-gray-800">Total:</span>
        <span class="text-2xl font-bold text-indigo-600"
          >₹{{ order.total_amount|floatformat:2 }}</span
        >
      </div>
    </div>

    <div class="mt-8 text-center">
      <a
        href="{% url 'student_orders' %}"
        class="px-6 py-3 bg-gray-300 text-gray-800 rounded-full font-semibold hover:bg-gray-400 transition"
        >Back to My Orders</a
      >
    </div>
  </div>
</div>
{% endblock %}
